<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/SimplePayroll.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> SimplePayroll.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>52/52</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">97.62% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>41/42</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>10/10</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>78/78</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">13×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">19×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">19×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity ^0.4.24;
&nbsp;
/// @title Payroll smart contract for simple payroll distribution
/// @author Kyle Dewhurst, MyBit Foundation
/// @notice Allows owner of organization set the addresses and how much to distribute to employees
&nbsp;
import './SafeMath.sol';
import './Database.sol';
&nbsp;
contract SimplePayroll {
  using SafeMath for uint;
&nbsp;
  Database public database;
&nbsp;
  constructor(address _database) public{
    database = Database(_database);
  }
&nbsp;
  //mapping (bytes32 =&gt; uint) public salary;
  //mapping (bytes32 =&gt; bool) public isOwner;
  //mapping (bytes32 =&gt; bool) public isEmployee;
  //mapping (bytes32 =&gt; bool) public isOrganization;
  //mapping (bytes32 =&gt; address[]) public employees;
&nbsp;
  /// @dev counter to allow mutex lock with only one SSTORE operation
  uint256 private guardCounter = 1;
&nbsp;
  // @notice
  // @dev _totalSupply == total salaries of all employees (1 token == 1 LocalAreaUnit (CHF, USD, EUR..))
  function addOrganization(string _organizationName, address[] _employees, uint[] _salaries)
  external {
    //bytes32 organizationID = keccak256(abi.encodePacked(_organizationName));
    //bytes32 ownerID = keccak256(abi.encodePacked(msg.sender, _organizationName));
    require(_employees.length &lt; uint8(100));    // uint8 overflows at 256. Dont loop through more than
    require(_employees.length == _salaries.length);
    require( !database.boolStorage(keccak256(abi.encodePacked("payrollIsOrganization", _organizationName))) );   // Impossible for owner to be set true without organization being registered
&nbsp;
    database.setBool(keccak256(abi.encodePacked("payrollIsOrganization", _organizationName)), true);
    database.setBool(keccak256(abi.encodePacked("payrollIsOwner", _organizationName, msg.sender)), true);
    database.setUint(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName)), _employees.length);
&nbsp;
    for (uint i = 0; i &lt; _employees.length; i++) {
      assert(_employees[i] != address(0));
      assert(_salaries[i] &gt; 0);
      database.setAddress(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i)), _employees[i]);
      //bytes32 employeeID = keccak256(abi.encodePacked(_employees[i], _organizationName));
      database.setUint(keccak256(abi.encodePacked("payrollEmployeeSalaries", _organizationName, _employees[i])), _salaries[i]);
      database.setBool(keccak256(abi.encodePacked("payrollIsEmployee", _organizationName, _employees[i])), true);
&nbsp;
      emit LogNewEmployee(_employees[i], _salaries[i], i);
    }
  }
&nbsp;
  function addEmployee(string _organizationName, address _newEmployee, uint _salary)
  external {
    require(_newEmployee != address(0));
    require(_salary &gt; 0);
    require( database.boolStorage(keccak256(abi.encodePacked("payrollIsOwner", _organizationName, msg.sender))) );
    //bytes32 employeeID = keccak256(abi.encodePacked(_newEmployee, _organizationName));
&nbsp;
    uint totalEmployees = database.uintStorage(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName))); //Get total employees
    database.setUint(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName)), totalEmployees+1); //Increase number of total employees
    database.setAddress(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, totalEmployees)), _newEmployee); //Add employee address
    database.setUint(keccak256(abi.encodePacked("payrollEmployeeSalaries", _organizationName, _newEmployee)), _salary); //Add employee salary
    database.setBool(keccak256(abi.encodePacked("payrollIsEmployee", _organizationName, _newEmployee)), true); //Set employee status to true
&nbsp;
    emit LogNewEmployee(_newEmployee, _salary, totalEmployees+1);
  }
&nbsp;
  // TODO: List employees
  function listEmployees(string _organizationName)
  view
  external
  returns(address[]) {
    uint totalEmployees = database.uintStorage(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName))); //Get total employees
    address[] memory employeeList = new address[](totalEmployees);
    for(uint i=0; i&lt;totalEmployees; i++){
      employeeList[i] = database.addressStorage(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i)));
    }
    return employeeList;
  }
&nbsp;
  // TODO: Find index of employee and replace that employee with the one at end of list + delete storage at end of list
  function removeEmployee(string _organizationName, address _employee)
  external {
    require( database.boolStorage(keccak256(abi.encodePacked("payrollIsOwner", _organizationName, msg.sender))) );
    //bytes32 organizationID = keccak256(abi.encodePacked(_organizationName));
    //bytes32 employeeID = keccak256(abi.encodePacked(_employee, _organizationName));
&nbsp;
    uint totalEmployees = database.uintStorage(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName))); //Get total employees
    for(uint i=0; i&lt;totalEmployees; i++){
      if(database.addressStorage(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i))) == _employee){
        database.setAddress(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i)), database.addressStorage(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, totalEmployees-1))) ); //Put last employee in position of removed employee
        database.deleteAddress(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, totalEmployees-1)));
        database.setUint(keccak256(abi.encodePacked("payrollEmployeeSalaries", _organizationName, _employee)), 0);
        database.setBool(keccak256(abi.encodePacked("payrollIsEmployee", _organizationName, _employee)), false);
        database.setUint(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName)), totalEmployees-1);
        return;
      }
    }
  }
&nbsp;
  function removeEmployeeKeepOrder(string _organizationName, address _employee)
  external {
    require( database.boolStorage(keccak256(abi.encodePacked("payrollIsOwner", _organizationName, msg.sender))) );
    bool found = false;
    //bytes32 organizationID = keccak256(abi.encodePacked(_organizationName));
    //bytes32 employeeID = keccak256(abi.encodePacked(_employee, _organizationName));
&nbsp;
    uint totalEmployees = database.uintStorage(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName))); //Get total employees
    for(uint i=0; i&lt;totalEmployees; i++){
      if(database.addressStorage(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i))) == _employee){
        found = true;
&nbsp;
        database.setUint(keccak256(abi.encodePacked("payrollEmployeeSalaries", _organizationName, _employee)), 0);
        database.setBool(keccak256(abi.encodePacked("payrollIsEmployee", _organizationName, _employee)), false);
      }
      if(found &amp;&amp; i &lt; totalEmployees-1){
        database.setAddress(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i)), database.addressStorage(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i+1))) ); //Put next employee in position of removed employee
      }
    }
    assert(found);
    database.setUint(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName)), totalEmployees-1);
  }
&nbsp;
  // @notice employer can send funds here to be distributed to all his employees
  // @notice must send the equivalent of everyones salary
  // @param (string) _organizationName = The name of the organization
  function payEmployees(string _organizationName)
  external
  nonReentrant
  payable {
    require(getTotalPayroll(_organizationName) == msg.value);
    //bytes32 organizationID = keccak256(abi.encodePacked(_organizationName));
    require( database.boolStorage(keccak256(abi.encodePacked("payrollIsOwner", _organizationName, msg.sender))) );
&nbsp;
    uint totalEmployees = database.uintStorage(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName))); //Get total employees
    for(uint i=0; i&lt;totalEmployees; i++){
      address thisEmployee = database.addressStorage(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i)));
      thisEmployee.transfer( database.uintStorage(keccak256(abi.encodePacked("payrollEmployeeSalaries", _organizationName, thisEmployee))) );
    }
  }
&nbsp;
  // @dev Should this function be accessible to anyone but the organization owner?
  function getTotalPayroll(string _organizationName)
  public
  view
  returns (uint totalPayroll){
    //bytes32 organizationID = keccak256(abi.encodePacked(_organizationName));
    uint totalEmployees = database.uintStorage(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName))); //Get total employees
    for(uint i=0; i&lt;totalEmployees; i++){
      address thisEmployee = database.addressStorage(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i)));
      //bytes32 employeeID = keccak256(abi.encodePacked(thisEmployee, _organizationName));
      totalPayroll = totalPayroll.add( database.uintStorage(keccak256(abi.encodePacked("payrollEmployeeSalaries", _organizationName, thisEmployee))) );
    }
    return totalPayroll;
  }
&nbsp;
  // TODO: Let employee or owner update their address here
  function updateAddress(string _organizationName, address _oldAddress, address _newAddress)
  external {
    require( database.boolStorage(keccak256(abi.encodePacked("payrollIsEmployee", _organizationName, _oldAddress))) );
    require( !database.boolStorage(keccak256(abi.encodePacked("payrollIsEmployee", _organizationName, _newAddress))) );
    if(database.boolStorage(keccak256(abi.encodePacked("payrollIsOwner", _organizationName, msg.sender))) || msg.sender == _oldAddress ){
      //bytes32 organizationID = keccak256(abi.encodePacked(_organizationName));
      //bytes32 oldEmployeeID = keccak256(abi.encodePacked(_oldAddress, _organizationName));
      //bytes32 newEmployeeID = keccak256(abi.encodePacked(_newAddress, _organizationName));
&nbsp;
      uint totalEmployees = database.uintStorage(keccak256(abi.encodePacked("payrollTotalEmployees", _organizationName))); //Get total employees
      for(uint i=0; i&lt;totalEmployees; i++){
        if(database.addressStorage(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i))) == _oldAddress){
          //Add employee address
          database.setAddress(keccak256(abi.encodePacked("payrollEmployeeAddresses", _organizationName, i)), _newAddress);
          //Give new address salary of old address
          database.setUint(keccak256(abi.encodePacked("payrollEmployeeSalaries", _organizationName, _newAddress)), database.uintStorage(keccak256(abi.encodePacked("payrollEmployeeSalaries", _organizationName, _oldAddress))) );
          //Give old address salary of 0
          database.setUint(keccak256(abi.encodePacked("payrollEmployeeSalaries", _organizationName, _oldAddress)), 0);
          database.setBool(keccak256(abi.encodePacked("payrollIsEmployee", _organizationName, _oldAddress)), false);
          database.setBool(keccak256(abi.encodePacked("payrollIsEmployee", _organizationName, _newAddress)), true);
          return;
        }
      }
    } else {
      revert();
    }
  }
&nbsp;
  /**
   * @dev Prevents a contract from calling itself, directly or indirectly.
   * If you mark a function `nonReentrant`, you should also
   * mark it `external`. Calling one `nonReentrant` function from
   * another is not supported. Instead, you can implement a
   * `private` function doing the actual work, and an `external`
   * wrapper marked as `nonReentrant`.
   */
  modifier nonReentrant() {
    guardCounter += 1;
    uint256 localCounter = guardCounter;
    _;
    <span class="missing-if-branch" title="else path not taken" >E</span>require(localCounter == guardCounter);
  }
&nbsp;
&nbsp;
  event LogNewEmployee(address indexed _employee, uint _salary, uint _index);
  event LogNewOrganization(bytes32 indexed _id, address indexed _creator);
&nbsp;
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Aug 28 2018 09:58:14 GMT-0700 (PDT)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
